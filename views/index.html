<!DOCTYPE html>
<html lang="en">
<head>
  <!--char set (lang above)-->
  <meta charset="utf-8">

  <!--device/browser shizzle-->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--meta content-->
  <link rel="shortcut icon" href="favicon.ico" />
  
  <meta name="author" content="Ruth John (@rumyra)">
  <meta name="dcterms.rightsHolder" content="Ruth John for Rumyra Ltd, United Kingdom, 2015">
  <title>{ Live : JS }</title>

  <link rel="stylesheet" href="reveal/css/reveal.css">
  <link rel="stylesheet" href="reveal/css/theme/rumyra.css" id="theme">
  <link rel="stylesheet" href="reveal/lib/css/zenburn.css">
  <script src="reveal/js/reveal.js"></script>

  <!-- <script src="https://js.pusher.com/3.0/pusher.min.js"></script> -->
  <link rel="stylesheet" href="visuals.css">

  <style type="text/css">
    #screen {
      position: absolute; top:0px; left:0px;
      margin: 0px; padding: 0px;
      width:100vw; height:100vh;
      background-color: black;
      display: none;
    }
  </style>
  
</head>

<!--
$brown: #463c34
$green: #acc486
$orange: #ea8d88
$purple: #8c4c6f

$cream: #eee5c4
$grey: #bebebe
-->

<body class="talk">
  <div class="reveal">
    <div class="slides">
      <section>

        <section data-background-image="images/gig.jpg" data-state="no-visuals">
          <h1>Live JS</h1>
          <h4>@Rumyra @mattmckegg @usefulthink</h4>
        </section>

        <!--visuals-->
        <section data-background-color="#8c4c6f" data-state="vis_vjing">
          
          <aside class="notes">
            <p>DANCE!</p>
          </aside>
        </section>

        <section data-background-color="#8c4c6f" data-background-image="images/livejs2.jpg" data-state="no-visuals">
          <h1>{ Live : JS }</h1>
          <h4>@LiveJS_Network</h4>
          <h4>livejs.network</h4>
          <aside class="notes">
            <p>Hello Copenhagen!</p>
            <p>We are live js -  a collective of musicians, visual artists, lighting artists, hardware hackers</p>
            <p>All with one thing in common, to create shows with the technology we know best, web technology.</p>
          </aside>
        </section>

        <section data-background-color="#8c4c6f" data-state="no-visuals">
          <h1>Introducing...</h1>
          <h3 class="fragment fade-in">Martin @usefulthink</h3>
          <h3 class="fragment fade-in">Matt @mattmckegg</h3>
          <h3 class="fragment fade-in">Ruth @rumyra</h3>
          <aside class="notes">
            <p>Let me introduce...</p>
            <p>On the lights we have Martin</p>
            <p>On the music buttons we have Matt</p>
            <p>And I am in control of the projectors</p>
            <p>Everything you just saw & witness this morning was powered by HTML, CSS & Javascript</p>
            <p>We're also going to be playing tomorrow to halpe you wind down</p>
            <p>And that's what we do, our end game is to play shows. And everyone know we can't have a show without music. MATT...</p>
          </aside>
        </section>

        <!--MATT -> analyse audio, create visuals, MIDI (DMX), -->

        <section data-background-color="#8c4c6f" data-background-image="images/vj.jpg" data-state="no-visuals">
          <h1>I'm the VJ</h1>
          <h4>What the what now?</h4>
          <aside class="notes">
            <p>So Matt playing music is really important to me, as I need sound to generate my visuals I create</p>
            <p>I'm a VJ - or AV artist.</p>
            <p>A/V stands for audio visual. Taking some audio and making visuals from it OR putting visuals to it.</p>
            <p>Who remembers this?... MATT LLAMA</p>
          </aside>
        </section>

        <section data-background-color="#8c4c6f" data-background-image="images/winamp.jpg" data-state="no-visuals">
          <h1>Winamp</h1>
          <h4>The greatest music player</h4>
          <audio src="media/llama.mp3" data-autoplay></audio>
          <aside class="notes">
            <p>This is winamp - the greatest mp3 player of all time - simple, lightweight, free</p>
            <p>But that wasn't the best bit...</p>
          </aside>
        </section>

        <section data-background-color="#8c4c6f" data-background-image="media/winampVis.gif" data-state="no-visuals">
          <h1>Visualisations</h1>
          <p>Went in time to the music</p>
          <aside class="notes">
            <p>Probably the single most influencial thing for any VJ of my generation</p>
            <p>Visuals that went in time to the music!</p>
            <p>I am going to go through some of the ways of making these in a browser - and how I came to start building my own software to do so. What's the first thing we need</p>
          </aside>
        </section>

        <section data-background-color="#acc486" data-state="no-visuals">
          <h1>Create Visuals</h1>
          <h4>Analyse Sound</h4>
          <aside class="notes">
            <p>To begin with we need to analyse the sound</p>
          </aside>
        </section>

        <section data-background-color="#8c4c6f" data-state="vis_spectrum_sound">
          <aside class="notes">
            <p>Very simple example - some dom elements - changing height with the data I receive back</p>
          </aside>
        </section>

        <section data-background-color="#acc486" data-background-image="images/analyserCode.jpg" data-state="no-visuals">
          <h1>Analysing sound</h1>
          <h4>Web Audio API</h4>
          <aside class="notes">
            <p>Again we can do this is a browser with the web audio api - it has an analyser node. This returns time data and frequency data.</p>
            <p>Nodes</p>
            <p>Frequencies human ear</p>
            <p>Analyser gives back array</p>
          </aside>
        </section>

        <section data-background-color="#acc486" class="lists" data-state="no-visuals">
          <div class="list-right">
            <ul>
              <h1>New CSS Features</h1>
              <li><h4>Blends</h4></li>
              <li><h4>Filters</h4></li>
            </ul>
          </div>
          <aside class="notes">
            <p>Because we are simply using the DOM we have all the features of code.</p>
            <p>We've got Filters and Blends.</p>
            <p>All very suited to what we want to do.</p>
          </aside>
        </section>

        <section data-background-color="#8c4c6f" data-state="vis_speakers">
          <aside class="notes">
            <p>DANCE!</p>
          </aside>
        </section>

        <section data-background-color="#acc486" class="lists" data-state="no-visuals">
          <div class="list-right">
            <ul>
              <h1>New CSS Features</h1>
              <li><h4>Custom Properties</h4></li>
            </ul>
          </div>
          <aside class="notes">
            <p>We've got Custom Properties, Filters and Blends.</p>
            <p>All very suited to what we want to do.</p>
          </aside>
        </section>

        <!-- make sure code has a workaround-->
        <section data-background-color="#acc486" data-background-image="images/cusPropCode.jpg" data-state="no-visuals">
          <h1>Custom Properties</h1>
          <aside class="notes">
            <p>Custom properties are basically variables - if you've used pre-processors. You delcare them in the top of your CSS, in a root block, beginning with a double dash.</p>
            <p>Now the great thing about these, is you can reference them directly in your JavaScript and by doing so they update, realtime, within your CSS.</p>
            <p>You may have noticed the biggest caveat with all these examples - especially that flower.</p>
            <p>Performance</p>
          </aside>
        </section>

        <section data-background-color="#ea8d88" data-background-image="images/codevember.jpg" data-state="no-visuals">
          <h1>We Got Visuals</h1>
          <h4>What's Next?</h4>
          <aside class="notes">
            <p>So many things we can do in the DOM</p>
            <p>Right - ok we've covered a few techniques there to make the visuals.</p>
            <p>And it was so great to experiment, for the most part creatively.</p>
            <p>When it came to the software tho, I have recently just switched everything to canvas.</p>
          </aside>
        </section>

        <section data-background-color="#ea8d88" data-background-image="images/puppy.jpg" data-state="no-visuals">
          <h1>Software</h1>
          <h4>All by yourself</h4>
          <aside class="notes">
            <p>This is the thing about building your own software... for yourself</p>
            <p>You spend half the time factoring, refactoring, re-refactoring</p>
            <p>And half the time being creative with what you've got</p>
          </aside>
        </section>

        <section data-background-color="#ea8d88" data-state="no-visuals">
          <h1>Half Creative</h1>
          <h2>Half Build</h2>
          <aside class="notes">
            <p>So for me when it came to the build, I actually haven't spent a lot of time on the interface at all</p>
            <p>This is a completely different way to which I am used to working.</p>
            <p>My visual experiements are very much kept spearate from the software so I can concentrate on data structure, I spent a lot of time on audio analysis and getting that right</p>
            <p>And of course controlling the visuals.</p>
            <p>I do this with a MIDI controller</p>
          </aside>
        </section>

        <section data-background-color="#ea8d88" data-state="no-visuals">
          <h1>Web MIDI API</h1>
          <h4>Controlling</h4>
          <aside class="notes">
            <p>MIDI is not sound - the bleepy noises you relate to MIDI are not actually MIDI - that is digital audio.</p>
            <p>MIDI is a standardised data protocol that electronic instruments all use so musical instrument manufacturers, software manufacturers etc can all make sure equipment etc... that's compatible.</p>
            <p>The first specs came out in 1983 - huge rise of popularity in electronic instruments in the 70s and indutry experts all got together and made the spec, so all thses instruments could talk to each other and the recording studios they found them in</p>
            <p>I could do a whole talk *just* about MIDI - I have, a lot, this year. You can find it online in some shape or form.</p>
          </aside>
        </section>

        <section data-background-color="#ea8d88" data-background-image="images/keyboard.jpg" data-state="no-visuals">
          <h1>MIDI Instrument</h1>
          <h4>Onboard Audio</h4>
          <aside class="notes">
            <p>This is a musical keyboard - it's MIDI enabled. This means when you play it, it sends MIDI data, it has a USB port and this is how you receive or send that data.</p>
            <p>This is a MIDI instrument - the big difference between this and this...</p>
          </aside>
        </section>

        <section data-background-color="#ea8d88" data-background-image="images/launchpad.jpg" data-state="no-visuals">
          <h1>MIDI Controller</h1>
          <h4>No Onboard Audio</h4>
          <aside class="notes">
            <p>This is a MIDI controller - this a Novation Launchpad. It does not have any onboard audio.</p>
            <p>You would use it to control audio from elsewhere, like software - when you press the buttons it send MIDI data.</p>
            <p>This is the crux of the Web MIDI API - just picking up on that data and deciding what to do with it.</p>
            <p>There are loads of MIDI controllers out there</p>
            <p>I have a few - this is my handbag MIDI controller. It's actually bluetooth, so I don't need a cable to hook it up to my machine so that's pretty sweet.</p>
            <p>I'm actually on my fifth iteration of controller for this software, which really is the interface.</p>
          </aside>
        </section>

        <section data-background-color="#ea8d88" data-state="vis_vjing">
          <h1>Demo</h1>
          <h4>MIDI</h4>
          <aside class="notes">
            <p>There's one small - ok it's massive thing that I didn't put in earlier - that's video.</p>
            <p>As a visual artist - I'll probably want to use video, but as it's just a video HTML element, it's simple and nothing to write home about</p>
            <p>So the big idea with having this controller is I can select different video clips, or afore seen animations and actually *mix* between them.</p>
            <p>I can also attach different effects to buttons and trigger them too.</p> </aside>
        </section>

        <section data-background-color="#8c4c6f" data-background-image="images/liveJS.jpg" data-state="no-visuals">
          <h1>{ Live : JS }</h1>
          <h4>@LiveJS_Network</h4>
          <h4>livejs.network</h4>
          <aside class="notes">
            <p>We're a community led project</p>
            <p>We're here to talk to you about the things we've built and how</p>
            <p>We have a slack channel - it's not just us there's Tim & Sam too</p>
            <p>Thank you very much for having us, we're around today & tomorrow and pls join us for our show</p>
          </aside>
        </section>

<!-- THIS IS IMPORTANT "0x" + x.toString(16); -->
      </section>
    </div></div>

    <div id="screen"></div>

<script src="reveal/plugin/notes/notes.js"></script>
<script src="reveal/plugin/highlight/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script src="scripts/audioVisual.js"></script>

<script type="text/javascript">
// Reveal~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Reveal.initialize({

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 1024,
  height: 768,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  center: false,

  // Display controls in the bottom right corner
  controls: false,

  // Display a presentation progress bar
  progress: false,

  // Display the page number of the current slide
  slideNumber: false,

  // Push each slide change to the browser history
  history: true,

  // Enable keyboard shortcuts for navigation
  keyboard: true,

  // Transition style
  transition: 'fade', // none/fade/slide/convex/concave/zoom

  // Transition speed
  transitionSpeed: 'default', // default/fast/slow

  // Transition style for full page slide backgrounds
  backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom

  // Number of slides away from the current that are visible
  viewDistance: 2,

  // Parallax background image
  parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

  // Parallax background size
  parallaxBackgroundSize: '', // CSS syntax, e.g. "2100px 900px"

  // Amount to move parallax background (horizontal and vertical) on slide change
  // Number, e.g. 100
  parallaxBackgroundHorizontal: '',
  parallaxBackgroundVertical: ''

});


window.addEventListener('keyup', function(e) {
  if (e.keyCode === 86) {
    document.getElementById('akai').play();
  }
}, false);

// set which animation to show
let currentAnimation = 'vis_speakers',
  allEls,
  totalEls,
  animateDom = function() {},
  useMic = false;

// spectrum
Reveal.addEventListener( 'vis_speakers', function(ev) {
  screen.style.display = 'block';
  currentAnimation = ev.type;

  screen.innerHTML = '<section class="vis-speakers"><div><img src="images/speakersCold/ben-schwarz.png" /></div><div><img src="images/speakersCold/charles-adler.png" /></div><div><img src="images/speakersCold/eric-muntz.png" /></div><div><img src="images/speakersCold/evangelina-ferreira.png" /></div><div><img src="images/speakersCold/henrik-joreteg.png" /></div><div><img src="images/speakersCold/ida-tin.png" /></div><div><img src="images/speakersCold/jessica-lord.png" /></div><div><img src="images/speakersCold/jordan-santell.png" /></div><div><img src="images/speakersCold/ken-wheeler.png" /></div><div><img src="images/speakersCold/kenneth-rohde.png" /></div><div><img src="images/speakersCold/lars-gunder-knudsen.png" /></div><div><img src="images/speakersCold/martin-schuhfuss.png" /></div><div><img src="images/speakersCold/matt-mckegg.png" /></div><div><img src="images/speakersCold/olafur-eliasson.png" /></div><div><img src="images/speakersCold/peter-shaughnessy.png" /></div><div><img src="images/speakersCold/phil-hawksworth.png" /></div><div><img src="images/speakersCold/ruth-john.png" /></div><div><img src="images/speakersCold/sam-richard.png" /></div><div><img src="images/speakersCold/una-kravets.png" /></div></section>';
  allEls = document.querySelectorAll('#screen div');
  totalEls = allEls.length;

  animateDom = function() {
    for (let i=0; i<totalEls; i++) {

      var freqOp = (frequencyData[i]/255);
      //style i
      allEls[i].style.backgroundColor = 'hsla('+i*11+',30%,'+50+'%,1)';

      
      allEls[i].style.opacity = freqOp;
      allEls[i].style.filter = 'contrast('+(freqOp+0.8)+')';
    }
  }
}, false);

// spectrum
Reveal.addEventListener( 'vis_spectrum_sound', function(ev) {
  screen.style.display = 'block';
  currentAnimation = ev.type;

  screen.innerHTML = '<section class="vis-spectrum"><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i></section>';
  allEls = document.querySelectorAll('#screen i');
  totalEls = allEls.length;

  animateDom = function() {
    for (let i=0; i<totalEls; i++) {
      //style i
      allEls[i].style.backgroundColor = 'hsla('+i*20+',50%,50%,0.9)';
      allEls[i].style.border = '1px solid hsla('+i*20+',50%,50%,1)';

      var freqVol = frequencyData[i*4]/4;
      allEls[i].style.height = freqVol+'vh';
    }
  }
}, false);

// spectrum
Reveal.addEventListener( 'vis_vjing', function(ev) {
  screen.style.display = 'block';
  currentAnimation = ev.type;

  function loadDom() {
    screen.innerHTML = '<div id="two-screens"><section class="vis-spectrum"><img src="images/asia.gif" /></section><section class="vis-speakers"><div><img src="images/speakersCold/ben-schwarz.png" /></div><div><img src="images/speakersCold/charles-adler.png" /></div><div><img src="images/speakersCold/eric-muntz.png" /></div><div><img src="images/speakersCold/evangelina-ferreira.png" /></div><div><img src="images/speakersCold/henrik-joreteg.png" /></div><div><img src="images/speakersCold/ida-tin.png" /></div><div><img src="images/speakersCold/jessica-lord.png" /></div><div><img src="images/speakersCold/jordan-santell.png" /></div><div><img src="images/speakersCold/ken-wheeler.png" /></div><div><img src="images/speakersCold/kenneth-rohde.png" /></div><div><img src="images/speakersCold/lars-gunder-knudsen.png" /></div><div><img src="images/speakersCold/martin-schuhfuss.png" /></div><div><img src="images/speakersCold/matt-mckegg.png" /></div><div><img src="images/speakersCold/olafur-eliasson.png" /></div><div><img src="images/speakersCold/peter-shaughnessy.png" /></div><div><img src="images/speakersCold/phil-hawksworth.png" /></div><div><img src="images/speakersCold/ruth-john.png" /></div><div><img src="images/speakersCold/sam-richard.png" /></div><div><img src="images/speakersCold/una-kravets.png" /></div></section></div>';
  }

  var allElsTwo, totalElsTwo, screenOne, screenTwo, screenOneImage;

  function setVars() {
    allElsTwo = document.querySelectorAll('.vis-speakers div');
    totalElsTwo = allElsTwo.length;
    screenOne = document.querySelector('.vis-spectrum');
    screenTwo = document.querySelector('.vis-speakers');
    console.log(screenTwo);
    screenOneImage = document.querySelector('.vis-spectrum img');
    screenTwo.style.opacity = 0;
  }

  loadDom();
  setVars();

  animateDom = function() {
    
    for (let i=0; i<totalElsTwo; i++) {
      var freqOp = (frequencyData[i]/255);
      //style i
      allElsTwo[i].style.backgroundColor = 'hsla('+i*11+',30%,'+50+(freqOp*10)+'%,1)';

      
      allElsTwo[i].style.opacity = freqOp;
      allElsTwo[i].style.filter = 'contrast('+(freqOp+1)+')';
    }

    if (data[0] === 176) {
      screenTwo.style.opacity = (data[2]/127);
      screenOne.style.opacity = 1-(data[2]/127);
    }

    if (data[0] === 144 && data[1] === 4) {
      if (data[2] === 64) {
        screenOneImage.style.filter = 'invert(100%)';
        screenTwo.style.background = 'white';
      } else if (data[2] === 0) {
        screenOneImage.style.filter = 'invert(0%)';
        screenTwo.style.background = 'transparent';
      }
    }
  }
}, false);


Reveal.addEventListener( 'no-visuals', function() {
  screen.style.display = 'none';
}, false);

</script>


</body>
</html>